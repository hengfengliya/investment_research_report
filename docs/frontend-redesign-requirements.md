# 前端重构设计需求文档（搜索结果页）

 版本：v0.1 草案（仅方案对齐，不改代码）

## 一、背景与目标（强约束）
- 背景：现有界面“工具化”“素”“割裂”，信息层级与视觉节奏欠统一，多处中文乱码与标签错误影响专业度。
- 约束：
  - 布局与功能只参考 fxbaogao 的“搜索结果页”。
  - 视觉风格只参考 YouMind 的“极简白”。
- 目标：在不改变后端接口前提下，重构搜索结果页（包含导航、搜索/筛选、结果列表、分页、状态等），实现 fxbaogao 的检索/筛选体验与信息结构；同时以 YouMind 的极简白视觉规范统一样式与交互。
- 范围：导航栏、搜索/筛选区、结果列表卡片、分页、空/加载/错误态、基础组件基元与设计令牌（不含业务接口变更；需后端能力的功能标注为“待支持”）。

## 二、风格基线（金融极简白 × YouMind）
 - 关键词：高留白、中性灰文字、细分隔线、轻阴影、少量品牌橙点缀；动效克制（≤120ms）。
 - 视觉：H1/H2/H3 层级明确；主操作（橙）与次操作（细边框）对比清晰；链接偏蓝但不喧宾夺主。
 - 交互：骨架屏优先于“加载中”文本，空态有简洁插画+引导；输入 300ms 防抖；统一 focus ring。

## 三、对标参考（单一来源）
- 布局与功能：fxbaogao 搜索结果页（网址参数如 `keywords/order/nop` 等）。核心模式：
  - 顶部搜索条+常用筛选（横排选项/标签）+“更多筛选”折叠区。
  - 结果列表项包含：行业/分类、标题（关键词高亮）、标签（热门/券商/深度/外文等）、发布日期、机构、作者、页数、下载操作、摘要片段（高亮）。
  - 排序切换、关键词过滤面板（标题包含/不包含、正文包含）、分页（页码+跳转）。
- 视觉与风格：YouMind 极简白（白底+细分隔线+轻阴影、统一按钮/卡片/标签风格、克制动效与留白节奏）。

## 四、设计令牌（Design Tokens）
- 颜色（主题：黑/白/橙 已确认）
  - 背景：`#FAFAFA`（页面）、`#FFFFFF`（内容面）
  - 分隔线：`#EAECF0`，边框弱化优先
  - 文本：主 `#101828`，次 `#475467`，弱 `#98A2B3`
  - 品牌：主色 `#FF7A1A`，Hover `#E56E10`，Active `#C85B10`
  - 焦点环：`rgba(255,122,26,0.40)` 2px（统一 `focus-visible`）
  - 链接：`#1F6FEB`（与品牌橙并存，控制使用密度）
  - 语义：成功 `#16A34A`，警告 `#F59E0B`，错误 `#DC2626`
 - 字号/行高（基准 16px，行高 1.6）
   - H1 24/32，H2 20/28，正文 16/26，说明 14/22
 - 间距刻度：4/8/12/16/24/32（区块建议 24/32）
 - 圆角：按钮/输入 8，卡片 12
 - 阴影：none/sm/md（默认 sm，hover md），避免重阴影
- 焦点环：已确认为品牌橙半透明（见上），统一 `focus-visible`

## 主题色确认
- 采用方案 A：黑/白/橙。
- 品牌主色为 `#FF7A1A`（更柔和的金融橙）。若需更鲜明，可切换为 `#FF6A00`，其余令牌保持不变。
- 使用范围：主按钮/少量强调/焦点环。正文与大面积背景仍以黑白+中性色为主，保证极简克制。

## 五、信息架构与布局（fxbaogao 功能对齐）
### 5.1 顶部导航（App Shell）
- 白底 + 底部分隔线（非重底色），内容区宽度 1200–1280。
- 左：Logo/名称；中：路由（首页/关于）；右：次要入口（数据源说明）。
- 当前路由用底边细线标识；悬停轻色背景，禁用大色块。

### 5.2 搜索与筛选区
- 结构分两层（与 fxbaogao 一致，视觉遵循 YouMind 克制表达）：
  - 第一层（常用横排）：
    - 关键词输入：占比最大，含“清空”图标；支持回车提交与 300ms 防抖搜索。
    - 快捷开关：仅搜标题（待支持）、不分词（待支持）。
    - 报告类型：行业研究/公司研究/宏观策略/会议纪要/财报/招股书/期货研究/金工量化/其他（按后端能力裁剪，无法支持则隐藏）。
    - 特色标签：热门/券商/中文/深度研究/非券商/外文（作为多选标签，无法支持则隐藏）。
    - 排序：综合排序（默认，等同后端综合策略）/时间；如需“热度”则映射为时间或后端支持后开启。
    - 主操作：橙色“发现一下/搜索”；次操作：重置。
  - 第二层（更多筛选折叠）：
    - 发布时间：快捷范围（近三天/近一周/近一月/近一年）+ 自定义日期范围（开始/结束）。
    - 行业过滤（待支持）：行业多选列表；若无行业字典则隐藏。
    - 股票/分析师/机构过滤：分别映射 stockCode/author/org（若字段缺失则隐藏）。
    - 报告页数：≥5/≥10/≥20/≥50（待支持，无则隐藏）。
    - 热门概念（待支持）：概念多选；无数据则隐藏。
- 关键词过滤面板（与 fxbaogao 一致，位置在排序附近或列表顶部的可折叠条）：
  - 标题包含：Token 化关键词（可删除/添加）。
  - 标题不包含：Token 化关键词。
  - 正文包含：Token 化关键词（待支持，前端先占位）。
- 交互规范：
  - 关键词输入 300ms 防抖触发；其他筛选以点击“搜索/应用”提交，避免频繁请求。
  - “更多筛选”默认收起，显示所选条件计数；每个条件可单独清除。
  - 骨架屏覆盖列表区，顶部筛选持续可操作。

### 5.3 结果列表（卡片式）
- 卡片样式：白底 + 12 圆角 + 1px 分隔线（`#EAECF0`）+ 轻阴影；hover 微阴影+轻抬起。
- 列表项信息结构（从上到下）：
  1) 顶部分类信息：行业/大类（如“文化传媒【机构】”样式）。
  2) 标题：最多 2 行，命中关键词高亮（前景色强调，不上底色）。
  3) 标签组：热门/深度研究/券商/非券商/外文 等（后端缺失时由规则推断或隐藏）。
  4) 元信息：发布日期 · 机构 · 作者（可脱敏显示首尾）· 页数。
  5) 操作：主操作“下载”（有 pdfUrl 时展示）；次操作“查看详情/原文”。
  6) 摘要片段：最多 2 行，命中关键词高亮；可附“查看更多段落”跳转详情。
- 高亮规范：列表项标题与摘要中匹配关键词以强调色（橙 70% 深度或品牌蓝）高亮，背景不着色。
- 文本裁切：`line-clamp` 控制标题/摘要 2 行；超长以省略号结尾。
- 操作：
  - 主：查看详情（链接/按钮）
  - 次：下载 PDF（有则显）、查看原文（新窗口）

### 5.4 侧栏与推荐（可选）
- 数据概览卡：与 fxbaogao 的“发现数据/研选报告”区块等价的引导卡，链接到站内“数据统计”或分类页；小屏隐藏，≥lg 显示。

### 5.5 分页
- 形式：页码 + 上/下页 + 快速前进（•••）模式；支持“每页条数”（10/20/50），小屏仅上下页。
- 状态：禁用态显著；总页数显示；切页后滚动至顶部或保持筛选条吸顶。

## 六、详情页对齐要点（补充）
 - 标题区信息条：标题（2 行）+ 元信息（灰）+ 操作按钮组（下载/原文）并排，首屏即见。
 - 标签与摘要分块；格式错误与乱码修复；长字段优先换行不溢出。

## 七、可访问性与性能
 - AA 对比度；键盘可达；统一 `focus-visible`；可点击区域≥40px。
 - 骨架屏：列表卡片骨架（标题/两行文本/元信息条）。
 - 性能：首屏 轻组件、减少重阴影与大图；列表虚拟化视规模再评估。

## 八、响应式规范
 - 宽度断点：
  - <640：单列，筛选区折叠为“筛选抽屉”（按钮打开）
   - 640–1024：双行筛选，列表单列
   - ≥1024：筛选横排 + 列表主栏 + 右侧推荐（可选）

## 九、组件基元（Tailwind 组合类约定）
 - Button
   - 主（橙）：`inline-flex h-10 items-center rounded-lg bg-brand-500 px-4 text-white hover:bg-brand-600 focus-visible:ring-2`
   - 次（描边）：`inline-flex h-10 items-center rounded-lg border border-slate-300 bg-white px-4 text-slate-700 hover:bg-slate-50`
   - 幽灵：`inline-flex h-10 items-center rounded-lg px-3 text-slate-600 hover:bg-slate-100`
 - Input/Select：`h-10 rounded-lg border border-slate-300 px-3 focus-visible:ring-2`
 - Card：`rounded-xl border border-slate-200 bg-white p-5 shadow-sm hover:shadow-md transition`
 - Badge：`rounded px-2 py-0.5 text-xs border border-slate-200 text-slate-600`（强调态用橙/蓝）

## 十、状态规范
 - 加载：骨架屏替换纯文案；筛选仍可操作；避免整页遮罩。
 - 空态：简洁插画 + 引导文案 + “清空筛选/调整关键词”。
 - 错误：错误文案 + “重试”按钮；局部刷新而非整页。

## 十一、实施清单（不改接口）
1) Tailwind 令牌与插件：
   - colors 扩展品牌橙；启用 `@tailwindcss/line-clamp`、`@tailwindcss/forms`。
2) 基础组件基元：Button/Card/Input/Badge 的组合类抽象（避免原子类散落）。
3) 导航：改白底+分隔线；当前路由底边高亮。
4) 筛选区：对齐 fxbaogao 结构（常用横排 + 更多筛选折叠 + 关键词过滤面板）；关键词输入 300ms 防抖。
5) 列表卡片：还原 fxbaogao 信息层级（分类/标题/标签/元信息/操作/摘要）；高亮命中；标题/摘要 2 行裁切。
6) 分页：页码 + 上/下页 + 快速前进；支持每页条数。
7) 状态：骨架屏、空态、错误态落地。
8) 文案/编码：修复乱码与标签错误；统一语气。

## 十二、验收标准
 - 视觉一致性：颜色、间距、圆角、阴影与焦点环符合令牌表；组件风格统一。
 - 可用性：键盘可达、focus 明确；搜索/筛选路径清晰；分页易用。
 - 稳定性：极长标题/摘要不破版；空/错/慢网下体验可控；移动端不溢出。

## 十三、后续可选项（非本期）
- 右侧“热门概念/统计”侧栏；收藏/分享；搜索建议；结果数与耗时展示；关键词命中片段定位；列表虚拟化。

 —— 以上为方案草案，确认后我再拆解为具体任务清单与实施顺序（仍按“先修复硬问题，再风格与信息架构重构”的节奏）。
